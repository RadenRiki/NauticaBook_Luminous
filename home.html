<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.4.0/fonts/remixicon.css" rel="stylesheet">
    <title>Home - NauticaBook</title>
</head>

<body>
    <!-- Navigation -->
    <nav>
        <div class="nav__logo" onclick="window.location.href='home.php'">NauticaBook</div>
        <ul class="nav__links">
            <li class="link"><a href="home.php">Home</a></li>
            <li class="link"><a href="myticket.php">MyTickets</a></li>
            <li class="link"><a href="offers.php">Offers</a></li>
        </ul>
        <div class="profile-icon" onclick="window.location.href='profile.php'">
            <i class="ri-user-3-line"></i>
        </div>
    </nav>

    <!-- Header Section -->
    <header class="section__container header__container">
        <div class="header__image__container">
            <div class="header__content">
                <h1>Enjoy Your Dream Vacation</h1>
                <p>Book Ferry, Cargo and stay packages at lowest price.</p>
            </div>

            <!-- Booking Section -->
            <section class="section__container booking__container">
                <!-- Booking Type Selection -->
                <div class="booking-type">
                    <button class="booking-type-btn active" onclick="switchBookingType('penumpang')">Penumpang</button>
                    <button class="booking-type-btn" onclick="switchBookingType('cargo')">Cargo</button>
                </div>

                <!-- Booking Form -->
                <section>
                    <form id="formPenumpang">
                        <!-- Pelabuhan Asal -->
                        <div class="form__group">
                            <span><i class="ri-ship-line"></i></span>
                            <div class="input__content">
                                <div class="input__group">
                                    <select id="pelabuhanAsal" onchange="updateAsal()" required>
                                        <option value="" disabled selected>Pilih Pelabuhan Asal</option>
                                        <option value="merak">Merak</option>
                                        <option value="bakauheni">Bakauheni</option>
                                        <option value="ketapang">Ketapang</option>
                                        <option value="gilimanuk">Gilimanuk</option>
                                    </select>
                                </div>
                                <p>Pilih lokasi keberangkatan</p>
                            </div>
                            <input type="hidden" id="AsalInput" name="AsalInput" value="" />
                        </div>

                        <!-- Pelabuhan Tujuan -->
                        <div class="form__group">
                            <span><i class="ri-ship-line"></i></span>
                            <div class="input__content">
                                <div class="input__group">
                                    <select id="pelabuhanTujuan" onchange="updateTujuan()" required>
                                        <option value="" disabled selected>Pilih Pelabuhan Tujuan</option>
                                        <option value="bakauheni">Bakauheni</option>
                                        <option value="merak">Merak</option>
                                        <option value="gilimanuk">Gilimanuk</option>
                                        <option value="ketapang">Ketapang</option>
                                    </select>
                                </div>
                                <p>Pilih lokasi tujuan</p>
                            </div>
                            <input type="hidden" id="TujuanInput" name="TujuanInput" value="" />
                        </div>

                        <!-- Jadwal Masuk -->
                        <div class="form__group">
                            <span><i class="ri-calendar-line"></i></span>
                            <div class="input__content">
                                <div class="input__group date-time">
                                    <input type="date" id="tanggal" name="tanggal" required />
                                    <select id="jamMasuk" onchange="updateJam()" required>
                                        <option value="" disabled selected>Pilih Jam</option>
                                        <option value="06:00">06:00</option>
                                        <option value="08:00">08:00</option>
                                        <option value="10:00">10:00</option>
                                    </select>
                                </div>
                                <p>Pilih jadwal keberangkatan</p>
                            </div>
                            <input type="hidden" id="JamInput" name="JamInput" value="" />
                        </div>

                        <!-- Layanan -->
                        <div class="form__group">
                            <span><i class="ri-service-line"></i></span>
                            <div class="input__content">
                                <div class="input__group">
                                    <select id="layanan" onchange="updateLayanan()" required>
                                        <option value="" disabled selected>Pilih Layanan</option>
                                        <option value="express">Express</option>
                                        <option value="regular">Regular</option>
                                    </select>
                                </div>
                                <p>Pilih jenis layanan</p>
                            </div>
                            <input type="hidden" id="LayananInput" name="LayananInput" value="" />
                        </div>

                        <!-- Penumpang -->
                        <div class="form__group">
                            <span><i class="ri-user-3-line"></i></span>
                            <div class="input__content">
                                <div class="input__group passenger-select">
                                    <div class="passenger-header" onclick="togglePassengerDropdown()">
                                        <span id="passengerHeader">Jumlah Penumpang</span>
                                        <i class="ri-arrow-down-s-line"></i>
                                    </div>
                                    <div class="passenger-dropdown">
                                        <div class="passenger-type">
                                            <div class="passenger-info">
                                                <h4>Dewasa (5 - 59 tahun)</h4>
                                            </div>
                                            <div class="passenger-count">
                                                <button type="button" onclick="decreaseCount('dewasa')">-</button>
                                                <span id="dewasa-count">0</span>
                                                <button type="button" onclick="increaseCount('dewasa')">+</button>
                                            </div>
                                        </div>

                                        <div class="passenger-type">
                                            <div class="passenger-info">
                                                <h4>Anak (2-4 tahun)</h4>
                                            </div>
                                            <div class="passenger-count">
                                                <button type="button" onclick="decreaseCount('anak')">-</button>
                                                <span id="anak-count">0</span>
                                                <button type="button" onclick="increaseCount('anak')">+</button>
                                            </div>
                                        </div>

                                        <div class="passenger-type">
                                            <div class="passenger-info">
                                                <h4>Bayi (di bawah 2 tahun)</h4>
                                            </div>
                                            <div class="passenger-count">
                                                <button type="button" onclick="decreaseCount('bayi')">-</button>
                                                <span id="bayi-count">0</span>
                                                <button type="button" onclick="increaseCount('bayi')">+</button>
                                            </div>
                                        </div>

                                        <div class="passenger-type">
                                            <div class="passenger-info">
                                                <h4>Lansia (60 tahun ke atas)</h4>
                                            </div>
                                            <div class="passenger-count">
                                                <button type="button" onclick="decreaseCount('lansia')">-</button>
                                                <span id="lansia-count">0</span>
                                                <button type="button" onclick="increaseCount('lansia')">+</button>
                                            </div>
                                        </div>

                                        <button type="button" class="simpan-btn"
                                            onclick="togglePassengerDropdown()">Simpan</button>
                                    </div>
                                </div>
                                <p>Pilih jumlah penumpang</p>
                            </div>
                            <input type="hidden" id="dewasaCount" name="dewasaCount" value="0" />
                            <input type="hidden" id="anakCount" name="anakCount" value="0" />
                            <input type="hidden" id="bayiCount" name="bayiCount" value="0" />
                            <input type="hidden" id="lansiaCount" name="lansiaCount" value="0" />
                        </div>

                        <!-- Tipe Tiket -->
                        <div class="form__group">
                            <span><i class="ri-car-line"></i></span>
                            <div class="input__content">
                                <div class="input__group ticket-select">
                                    <div class="ticket-header" onclick="toggleTicketDropdown()">
                                        <span id="ticketHeader">Pilih Tipe Tiket</span>
                                        <i class="ri-arrow-down-s-line"></i>
                                    </div>
                                    <div class="ticket-dropdown">
                                        <button class="close-btn" onclick="toggleTicketDropdown()">×</button>
                                        <h2 class="modal-title">Pilih Tipe Tiket</h2>

                                        <div class="ticket-type">
                                            <div class="ticket-content">
                                                <div class="ticket-info">
                                                    <img src="assets/pejalankaki.png" alt="Pejalan Kaki">
                                                    <div class="ticket-details">
                                                        <h4>Pejalan Kaki</h4>
                                                        <p class="description">Tanpa berkendara</p>
                                                    </div>
                                                </div>
                                                <input type="radio" name="ticket-type" value="pejalan-kaki"
                                                    onclick="selectTicketType('Pejalan Kaki')">
                                            </div>
                                        </div>

                                        <div class="ticket-type">
                                            <div class="ticket-content">
                                                <div class="ticket-info">
                                                    <img src="assets/sepeda.png" alt="Sepeda">
                                                    <div class="ticket-details">
                                                        <h4>Sepeda</h4>
                                                        <p class="golongan">Golongan I (Maks. 3 penumpang)</p>
                                                        <p class="description">Sepeda biasa</p>
                                                    </div>
                                                </div>
                                                <input type="radio" name="ticket-type" value="sepeda"
                                                    onclick="selectTicketType('Sepeda')">
                                            </div>
                                        </div>

                                        <div class="ticket-type">
                                            <div class="ticket-content">
                                                <div class="ticket-info">
                                                    <img src="assets/motorkecil.png" alt="Motor Kecil">
                                                    <div class="ticket-details">
                                                        <h4>Sepeda Motor (&lt;500cc)</h4>
                                                        <p class="golongan">Golongan II (Maks. 3 penumpang)</p>
                                                        <p class="description">Sepeda motor dibawah 500cc dan gerobak
                                                            dorong.</p>
                                                    </div>
                                                </div>
                                                <input type="radio" name="ticket-type" value="motor-kecil"
                                                    onclick="selectTicketType('Motor Kecil')">
                                            </div>
                                        </div>

                                        <div class="ticket-type">
                                            <div class="ticket-content">
                                                <div class="ticket-info">
                                                    <img src="assets/motorbesar.png" alt="Motor Besar">
                                                    <div class="ticket-details">
                                                        <h4>Sepeda Motor (&gt;500cc)</h4>
                                                        <p class="golongan">Golongan III (Maks. 3 penumpang)</p>
                                                        <p class="description">Sepeda motor di atas 500cc dan kendaraan
                                                            roda tiga.</p>
                                                    </div>
                                                </div>
                                                <input type="radio" name="ticket-type" value="motor-besar"
                                                    onclick="selectTicketType('Motor Besar')">
                                            </div>
                                        </div>

                                        <div class="ticket-type">
                                            <div class="ticket-content">
                                                <div class="ticket-info">
                                                    <img src="assets/mobil.png" alt="Mobil">
                                                    <div class="ticket-details">
                                                        <h4>Mobil Penumpang</h4>
                                                        <p class="golongan">Golongan IVA (Maks. 10 penumpang)</p>
                                                        <p class="description">Panjang kendaraan maksimum 5 meter
                                                            (mobil, jeep, sedan, minicab, minibus, mikrolet, station
                                                            wagon, dsb.)</p>
                                                    </div>
                                                </div>
                                                <input type="radio" name="ticket-type" value="mobil"
                                                    onclick="selectTicketType('Mobil')">
                                            </div>
                                        </div>

                                        <button type="button" class="simpan-btn"
                                            onclick="toggleTicketDropdown()">Simpan</button>
                                    </div>
                                </div>
                                <p>Pilih tipe kendaraan Anda</p>
                            </div>
                            <input type="hidden" id="selectedTicketType" name="selectedTicketType" value="" />
                        </div>

                        <!-- Submit Button -->
                        <div class="search-container">
                            <button type="submit" class="search-btn" id="submitBooking">
                                Cari Tiket <i class="ri-search-line"></i>
                            </button>
                        </div>
                    </form>
                </section>

                <script>
                    const asalSelect = document.getElementById('pelabuhanAsal');
                    const tujuanSelect = document.getElementById('pelabuhanTujuan');

                    // Event listener untuk Pelabuhan Asal
                    asalSelect.addEventListener('change', function () {
                        const pelabuhanAsal = this.value;

                        if (pelabuhanAsal === 'merak') {
                            tujuanSelect.value = 'bakauheni';
                        } else if (pelabuhanAsal === 'bakauheni') {
                            tujuanSelect.value = 'merak';
                        } else if (pelabuhanAsal === 'ketapang') {
                            tujuanSelect.value = 'gilimanuk';
                        } else if (pelabuhanAsal === 'gilimanuk') {
                            tujuanSelect.value = 'ketapang';
                        }
                    });

                    // Event listener untuk Pelabuhan Tujuan
                    tujuanSelect.addEventListener('change', function () {
                        const pelabuhanTujuan = this.value;

                        if (pelabuhanTujuan === 'merak') {
                            asalSelect.value = 'bakauheni';
                        } else if (pelabuhanTujuan === 'bakauheni') {
                            asalSelect.value = 'merak';
                        } else if (pelabuhanTujuan === 'ketapang') {
                            asalSelect.value = 'gilimanuk';
                        } else if (pelabuhanTujuan === 'gilimanuk') {
                            asalSelect.value = 'ketapang';
                        }
                    });

                    // Event listener untuk Submit Booking
                    document.getElementById('submitBooking').addEventListener('click', function (event) {
                        event.preventDefault();
                        // Ambil semua jumlah penumpang yang sudah ada
                        const jumlahDewasa = parseInt(document.getElementById('dewasa-count').textContent, 10);
                        const jumlahAnak = parseInt(document.getElementById('anak-count').textContent, 10);
                        const jumlahBayi = parseInt(document.getElementById('bayi-count').textContent, 10);
                        const jumlahLansia = parseInt(document.getElementById('lansia-count').textContent, 10);
                        // Ambil value jamMasuk dari select
                        const jamSelected = document.getElementById('jamMasuk').value;
                        // Buat data object untuk disimpan
                        const data = {
                            pelabuhanAsal: document.getElementById('pelabuhanAsal').value,
                            pelabuhanTujuan: document.getElementById('pelabuhanTujuan').value,
                            tanggal: document.getElementById('tanggal').value,
                            jamMasuk: jamSelected,
                            layanan: document.getElementById('layanan').value,
                            tipeTiket: document.getElementById('selectedTicketType').value,
                            jumlahPenumpang: {
                                dewasa: jumlahDewasa,
                                anak: jumlahAnak,
                                bayi: jumlahBayi,
                                lansia: jumlahLansia,
                                total: jumlahDewasa + jumlahAnak + jumlahBayi + jumlahLansia
                            }
                        };
                        sessionStorage.setItem('bookingData', JSON.stringify(data));
                        window.location.href = 'ticketdetail.html';
                    });
                </script>

                <!-- Search Button Container -->
                <!-- <div class="search-container">
            <button type="submit" class="search-btn" onclick="handlePassengerSubmit()">
              Cari Tiket <i class="ri-search-line"></i>
            </button>
          </div>
        </form> -->

                <!-- Form Cargo -->
                <form id="formCargo" style="display: none;">
                    <!-- Jenis Barang -->
                    <div class="form__group">
                        <span><i class="ri-box-line"></i></span>
                        <div class="input__content">
                            <div class="input__group">
                                <select id="jenisBarang" required>
                                    <option value="" disabled selected>Pilih Jenis Barang</option>
                                    <option value="Umum">Umum</option>
                                    <option value="Kosmetik dan Kecantikan">Kosmetik dan Kecantikan</option>
                                    <option value="Kendaraan">Kendaraan</option>
                                    <option value="Peralatan Rumah Tangga">Peralatan Rumah Tangga</option>
                                    <option value="Mesin ukuran besar">Mesin ukuran besar</option>
                                    <option value="Elektronik">Elektronik</option>
                                    <option value="Furniture">Furniture</option>
                                    <option value="Lainnya">Lainnya</option>
                                </select>
                            </div>
                            <p>Pilih jenis barang untuk pengiriman</p>
                        </div>
                    </div>

                    <!-- Berat Barang -->
                    <div class="form__group">
                        <span><i class="ri-scale-line"></i></span>
                        <div class="input__content">
                            <div class="input__group">
                                <input type="number" id="beratBarang" name="beratBarang"
                                    placeholder="Masukkan berat barang dalam kilogram" min="1" required />
                            </div>
                            <p>Masukkan berat barang dalam kilogram</p>
                        </div>
                    </div>

                    <!-- Pelabuhan Asal -->
                    <div class="form__group">
                        <span><i class="ri-ship-line"></i></span>
                        <div class="input__content">
                            <div class="input__group">
                                <select id="pelabuhanAsalCargo" onchange="updateCargoDestinations()" required>
                                    <option value="" disabled selected>Pilih Pelabuhan Asal</option>
                                    <option value="merak">Merak</option>
                                    <option value="bakauheni">Bakauheni</option>
                                    <option value="ketapang">Ketapang</option>
                                    <option value="gilimanuk">Gilimanuk</option>
                                    <option value="tanjungpriok">Tanjung Priok</option>
                                    <option value="tanjungperak">Tanjung Perak</option>
                                </select>
                            </div>
                            <p>Pilih lokasi keberangkatan</p>
                        </div>
                    </div>

                    <!-- Pelabuhan Tujuan -->
                    <div class="form__group">
                        <span><i class="ri-ship-line"></i></span>
                        <div class="input__content">
                            <div class="input__group">
                                <select id="pelabuhanTujuanCargo" required>
                                    <option value="" disabled selected>Pilih Pelabuhan Tujuan</option>
                                </select>
                            </div>
                            <p>Pilih lokasi tujuan</p>
                        </div>
                    </div>

                    <!-- Tanggal Pengiriman -->
                    <div class="form__group">
                        <span><i class="ri-calendar-line"></i></span>
                        <div class="input__content">
                            <div class="input__group">
                                <input type="date" id="tanggalCargo" name="tanggalCargo" required />
                            </div>
                            <p>Pilih estimasi tanggal pengiriman</p>
                        </div>
                    </div>

                    <!-- Tombol Submit -->
                    <div class="search-container">
                        <button type="submit" class="search-btn">
                            Cari Tarif Cargo <i class="ri-search-line"></i>
                        </button>
                    </div>
                </form>

                <script>
                    function updateCargoDestinations() {
                        const asalSelect = document.getElementById('pelabuhanAsalCargo');
                        const tujuanSelect = document.getElementById('pelabuhanTujuanCargo');
                        const selectedAsal = asalSelect.value;

                        // Hapus semua opsi tujuan yang ada
                        while (tujuanSelect.options.length > 1) {
                            tujuanSelect.remove(1);
                        }

                        // Definisikan rute yang valid
                        const validRoutes = {
                            'merak': ['bakauheni', 'tanjungpriok', 'tanjungperak'],
                            'bakauheni': ['merak', 'tanjungpriok', 'tanjungperak'],
                            'ketapang': ['gilimanuk', 'tanjungperak'],
                            'gilimanuk': ['ketapang', 'tanjungperak'],
                            'tanjungpriok': ['merak', 'bakauheni', 'tanjungperak'],
                            'tanjungperak': ['merak', 'bakauheni', 'ketapang', 'gilimanuk', 'tanjungpriok']
                        };

                        // Nama pelabuhan untuk display
                        const portNames = {
                            'merak': 'Merak',
                            'bakauheni': 'Bakauheni',
                            'ketapang': 'Ketapang',
                            'gilimanuk': 'Gilimanuk',
                            'tanjungpriok': 'Tanjung Priok',
                            'tanjungperak': 'Tanjung Perak'
                        };

                        // Tambahkan opsi tujuan yang valid
                        if (selectedAsal && validRoutes[selectedAsal]) {
                            validRoutes[selectedAsal].forEach(portCode => {
                                const option = new Option(portNames[portCode], portCode);
                                tujuanSelect.add(option);
                            });
                        }
                    }

                    // Set minimum date untuk input tanggal ke hari ini
                    document.addEventListener('DOMContentLoaded', function () {
                        const today = new Date().toISOString().split('T')[0];
                        document.getElementById('tanggalCargo').min = today;
                    });

                    // Form submission
                    document.getElementById('formCargo').addEventListener('submit', function (event) {
                        event.preventDefault();
                        const asalValue = document.getElementById('pelabuhanAsalCargo').value;
                        const tujuanValue = document.getElementById('pelabuhanTujuanCargo').value;
                        const beratValue = document.getElementById('beratBarang').value;

                        if (asalValue === tujuanValue) {
                            alert('Pelabuhan asal dan tujuan tidak boleh sama!');
                            return false;
                        }

                        if (beratValue <= 0) {
                            alert('Berat barang harus lebih dari 0 kg!');
                            return false;
                        }

                        // Jika validasi berhasil, simpan data dan redirect
                        const cargoData = {
                            pelabuhanAsalCargo: asalValue,
                            pelabuhanTujuanCargo: tujuanValue,
                            jenisBarang: document.getElementById('jenisBarang').value,
                            beratBarang: parseFloat(beratValue),
                            tanggalCargo: document.getElementById('tanggalCargo').value
                        };
                        try {
                            // Simpan ke sessionStorage
                            sessionStorage.setItem('cargoData', JSON.stringify(cargoData));
                            
                            // Log data untuk debugging
                            console.log('Data yang disimpan:', cargoData);
                            console.log('Data dari sessionStorage:', JSON.parse(sessionStorage.getItem('cargoData')));
                            
                            // Redirect setelah memastikan data tersimpan
                            window.location.href = 'cargodetail.html';
                        } catch (error) {
                            console.error('Error menyimpan data:', error);
                            alert('Terjadi kesalahan saat menyimpan data');
                        }                        
                    });
                </script>
            </section>
        </div>
    </header>

    <footer class="footer">
        <div class="section__container footer__container">
            <div class="footer__col">
                <h3>NauticaBook</h3>
                <p>
                    NauticaBook adalah platform untuk booking ferry dan cargo secara cepat dan terpercaya.
                    Pengguna dapat mencari jadwal, membandingkan harga, dan memesan tiket dengan mudah dalam beberapa
                    langkah.
                </p>
                <p>
                    NauticaBook menawarkan antarmuka ramah pengguna untuk pengalaman pemesanan nyaman,
                    baik untuk perjalanan pribadi, bisnis, maupun logistik. Dengan mitra terpercaya,
                    layanan pelanggan responsif, dan sistem pembayaran aman, NauticaBook memenuhi kebutuhan transportasi
                    laut Anda.
                </p>
            </div>
            <div class="footer__col">
                <h4>Tim Luminous</h4>
                <p>Raden Riki Hilviastari Saputra (23523217)</p>
                <p>Arvindra Ahmad Ramadhan (23523128)</p>
                <p> Taqya Maritsa Hakim (23523108)</p>
                <p>Tazki Ulil Absar (23523208)</p>
            </div>
            <div class="footer__col">
                <h4>Legal</h4>
                <p><a href="faqs.html" style="color: #fff;">FAQs</a></p>
                <p><a href="tnc.html" style="color: #fff;">Terms & Conditions</a></p>
                <p><a href="privacy.html" style="color: #fff;">Privacy Policy</a></p>
              </div>
            <div class="footer__col">
                <h4>Resources</h4>
                <p>Social Media</p>
                <p>Help Center</p>
                <p>Partnerships</p>
            </div>
        </div>
        </div>
        <div class="footer__bar">
            Copyright © 2024 Webs by Luminous. All rights reserved.
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>